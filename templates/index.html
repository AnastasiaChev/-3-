{% extends "base.html" %}

{% block title %}üìö –í—Å–µ –∫–Ω–∏–≥–∏{% endblock %}

{% block content %}
    <div class="page-header">
        <h1>üìñ –í—Å–µ –∫–Ω–∏–≥–∏</h1>
        <p>–ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤</p>
    </div>

    <div class="books-grid">
        {% for book in books %}
        <div class="book-card">
            <div class="book-cover">
                {% if book.cover %}
                    <img src="{{ url_for('static', filename='covers/' + book.cover) }}" alt="–û–±–ª–æ–∂–∫–∞ {{ book.filename }}">
                {% else %}
                    <img src="https://via.placeholder.com/120x180?text=üìñ+–ù–µ—Ç+–æ–±–ª–æ–∂–∫–∏" alt="–û–±–ª–æ–∂–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç">
                {% endif %}
            </div>
            <div class="book-info">
                <h3 class="book-title">
                    {{ book.metadata.title if book.metadata.title else book.filename.rsplit('.', 1)[0] }}
                </h3>
                {% if book.metadata.author %}
                <p class="book-author">–ê–≤—Ç–æ—Ä: {{ book.metadata.author }}</p>
                {% endif %}
                <a href="{{ url_for('download_file', filename=book.filename) }}" class="btn-download">
                    üì• –°–∫–∞—á–∞—Ç—å
                </a>
            </div>
        </div>
        {% else %}
        <p>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–Ω–∏–≥.</p>
        {% endfor %}
    </div>

    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
    {% if total_pages > 1 %}
    <div class="pagination">
        {% if page > 1 %}
        <a href="{{ url_for('index', page=page-1) }}" class="pagination-btn">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
        {% endif %}

        {% for p in pagination_range %}
        <a href="{{ url_for('index', page=p) }}" class="pagination-btn {% if p == page %}active{% endif %}">{{ p }}</a>
        {% endfor %}

        {% if page < total_pages %}
        <a href="{{ url_for('index', page=page+1) }}" class="pagination-btn">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</a>
        {% endif %}
    </div>
    {% endif %}
{% endblock %}