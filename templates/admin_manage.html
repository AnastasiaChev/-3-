{% extends "admin_base.html" %}

{% block title %}üõ†Ô∏è –ê–¥–º–∏–Ω ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ {% endblock %}

{% block admin_content %}
    <div class="page-header">
        <h1>üõ†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ </h1>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ <code>books/</code></p>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞) -->
    {% if message %}
    <div class="alert {% if '—É–¥–∞–ª–µ–Ω—ã' in message or '–¥–æ–±–∞–≤–ª–µ–Ω–∞' in message %}alert-success{% else %}alert-error{% endif %}">
        {{ message }}
    </div>
    {% endif %}

    <!-- –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div class="upload-panel">
        <h3>üì• –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–Ω–∏–≥—É</h3>
        <form method="POST" enctype="multipart/form-data">
            <label>–§–∞–π–ª –∫–Ω–∏–≥–∏ (.pdf):</label>
            <input type="file" name="book_file" accept=".pdf" required>

            <label>–û–±–ª–æ–∂–∫–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, .jpg):</label>
            <input type="file" name="cover_file" accept=".jpg,">

            <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
            <input type="text" name="title" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–∞—Å—Ç–µ—Ä –∏ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞" required>

            <label>–ê–≤—Ç–æ—Ä:</label>
            <input type="text" name="author" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–∏—Ö–∞–∏–ª –ë—É–ª–≥–∞–∫–æ–≤" required>

            <label>–¢–µ–º–∞:</label>
            <input type="text" name="topic" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Ä–æ–º–∞–Ω, –∫–ª–∞—Å—Å–∏–∫–∞, —É—á–µ–±–Ω–∏–∫" required>

            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É</button>
        </form>
        <p><small>–ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 50 –ú–ë.</small></p>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ —Å –∫–Ω–æ–ø–∫–∞–º–∏ —É–¥–∞–ª–µ–Ω–∏—è -->
    <div class="file-list">
        <h3>üóëÔ∏è –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã ({{ files|length }})</h3>
        {% for filename in files %}
        <div class="file-item">
            <span>{{ filename }}</span>
            <div class="delete-wrapper">
                <button type="button" class="btn-delete" onclick="showConfirm(this, '{{ filename }}')">
                    –£–¥–∞–ª–∏—Ç—å
                </button>
                <div class="confirm-box" style="display:none;">
                    <span>–£–¥–∞–ª–∏—Ç—å?</span>
                    <form method="POST" style="display:inline;">
                        <input type="hidden" name="filename" value="{{ filename }}">
                        <button type="submit" name="delete" class="btn-confirm-yes">–î–∞</button>
                    </form>
                    <button type="button" class="btn-confirm-no" onclick="hideConfirm(this)">–ù–µ—Ç</button>
                </div>
            </div>
        </div>
                {% else %}
        <p>–ù–µ—Ç —Ñ–∞–π–ª–æ–≤ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ.</p>
        {% endfor %}
    </div>

{% endblock %}
